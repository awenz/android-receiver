#!/bin/bash

# we use a fifo in case multiple messages come in rapid succession; just
# pipe them through one dzen rather than spawning many dzens at once.
fifo='/tmp/android-receiver.fifo'

# look and feel
font='Verdana-8'
foreground='#ffffba'
background='#303030'

if [[ ! -e "$fifo" ]]; then
  mkfifo "$fifo"
  (dzen2 -ta l -fn "$font" -bg $background -fg $foreground < "$fifo"; rm -f "$fifo") &
fi

# show each message for 10s
(echo "$*"; sleep 10) >> "$fifo"
